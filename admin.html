<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NSCDC Admin Dashboard</title>

<style>
body{
    font-family:"Segoe UI", Tahoma, Arial, sans-serif;
    background:#f4f6f8;
    padding:30px;
}

h2{
    color:#b40000;
    margin-bottom:20px;
}

table{
    width:100%;
    background:#ffffff;
    border-collapse:collapse;
    box-shadow:0 6px 20px rgba(0,0,0,0.15);
}

th, td{
    padding:12px;
    border:1px solid #ddd;
    text-align:center;
    font-size:14px;
}

th{
    background:#1b1f3b;
    color:#ffffff;
}

.pending{
    color:orange;
    font-weight:bold;
}

.approved{
    color:green;
    font-weight:bold;
}

.rejected{
    color:red;
    font-weight:bold;
}

button{
    padding:6px 10px;
    border:none;
    color:#ffffff;
    border-radius:4px;
    cursor:pointer;
    font-size:13px;
}

.approve{
    background:green;
}

.reject{
    background:red;
    margin-left:4px;
}

.delete{
    background:#555;
    margin-left:4px;
}
</style>
</head>

<body>

<h2>NSCDC Admin Approval Dashboard</h2>

<table>
<thead>
<tr>
    <th>Full Name</th>
    <th>Replacement No</th>
    <th>NIN</th>
    <th>State</th>
    <th>LGA</th>
    <th>Next of Kin</th>
    <th>Email</th>
    <th>Address</th>
    <th>Qualification</th>
    <th>Status</th>
    <th>Action</th>
</tr>
</thead>

<tbody id="adminData"></tbody>
</table>

<script>
function loadAdminTable(){
    let volunteers = JSON.parse(localStorage.getItem("volunteers")) || [];
    let tbody = document.getElementById("adminData");

    tbody.innerHTML = "";

    if(volunteers.length === 0){
        tbody.innerHTML = `
            <tr>
                <td colspan="11">No applications submitted</td>
            </tr>`;
        return;
    }

    volunteers.forEach((v, i) => {
        tbody.innerHTML += `
        <tr>
            <td>${v.fullname}</td>
            <td>${v.replacementNo}</td>
            <td>${v.nin}</td>
            <td>${v.state}</td>
            <td>${v.lga}</td>
            <td>${v.nextOfKin}</td>
            <td>${v.email}</td>
            <td>${v.address}</td>
            <td>${v.qualification}</td>
            <td class="${v.status.toLowerCase()}">${v.status}</td>
            <td>
                <button class="approve" onclick="updateStatus(${i}, 'Approved')">Approve</button>
                <button class="reject" onclick="updateStatus(${i}, 'Rejected')">Reject</button>
                <button class="delete" onclick="deleteApplicant(${i})">Delete</button>
            </td>
        </tr>
        `;
    });
}

function updateStatus(index, status){
    let volunteers = JSON.parse(localStorage.getItem("volunteers")) || [];
    volunteers[index].status = status;
    localStorage.setItem("volunteers", JSON.stringify(volunteers));
    loadAdminTable();
}

function deleteApplicant(index){
    if(confirm("Are you sure you want to delete this applicant permanently?")){
        let volunteers = JSON.parse(localStorage.getItem("volunteers")) || [];
        volunteers.splice(index, 1);
        localStorage.setItem("volunteers", JSON.stringify(volunteers));
        loadAdminTable();
    }
}

document.addEventListener("DOMContentLoaded", loadAdminTable);
</script>

</body>
</html>
